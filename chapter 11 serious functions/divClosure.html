<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Замыкание в обработчике события</title>
        <style>
        body, button { margin: 10px; }
        div { padding: 10px; }
        </style>
        <script>
            //var count = 0; Код без замыкания
            //window.onload = function() {
            //    var button = document.getElementById("clickme"); Получаем элемент кнопки
            //    button.onclick = handleClick; Добавляем обработчик щетчка в свойство onclick
            //};
            //function handleClick() { Функция-обработчик события щелчка на кнопке
            //    var message = "Ты нажал меня ";
            //    var div = document.getElementById("message"); Получаем элемент div
            //    count++;
            //    div.innerHTML = message + count + " раз!";
            //    if (count == 2 || count == 3 ||count == 4) {
            //        div.innerHTML = message + count + " раза!";
            //    }
            //}

            window.onload = function(){
                var count = 0;
                var message = "Ты нажал меня ";
                var div = document.getElementById("message");
                var button = document.getElementById("clickme");
                button.onclick = function() {//Обработчик назначается как функциональное выражение (С лексической областью действия)
                    count++;
                    div.innerHTML = message + count + " раз!";//Три свободные переменные: div, message, count, поэтому
                    if (count == 2 || count == 3 ||count == 4) {//для функции-обработчика создается замыкание
                        div.innerHTML = message + count + " раза!";//Свойству onclick кнопки назначается замыкание
                    }
                };
            };
        </script>
    </head>
    <body>
        <button id="clickme">Нажми меня!</button>
        <div id="message">Здесь будет текст</div>
    </body>
</html>